<form [formGroup]="formLoad">
   <p-dialog [(visible)]="openModal" styleClass="w-10 lg:w-6" [header]="tittleForm" [modal]="true" class="p-fluid">
      <ng-template pTemplate="content">
         <app-message-required-field></app-message-required-field>
         <div class="grid">
            <div class="form-group field mt-5 col-6">
               <p-float-label>
                  <p-select inputId="supplierId" formControlName="supplierId" [options]="suppliers"
                     optionLabel="fullName" optionValue="id" [filter]="true" filterBy="fullName" styleClass="w-full"
                     appendTo="body"></p-select>
                  <label for="supplierId" class="text-lg font-bold text-800 required-field">
                     {{ labels.supplier }}
                  </label>
               </p-float-label>
            </div>

            <div class="form-group field mt-5 col-6">
               <p-float-label>
                  <p-datepicker id="date" styleClass="w-full" [showIcon]="true" dateFormat="dd/mm/yy" appendTo="body"
                     formControlName="date">
                  </p-datepicker>
                  <label htmlFor="date" class="text-lg font-bold text-800 required-field">
                     {{ labels.date }}
                  </label>
               </p-float-label>
            </div>

            <div class="form-group field mt-3 col-6">
               <p-float-label>
                  <p-select inputId="lotId" formControlName="lotId" [options]="lots" optionLabel="description"
                     optionValue="id" [filter]="true" filterBy="prefix,description" styleClass="w-full" appendTo="body"
                     (onChange)="getCorrelativeLot()">
                     <ng-template let-lot #item>
                        <div class="border-bottom-1 border-primary pb-2">
                           <div>
                              {{ labels.prefix }}:
                              <b>{{ lot.prefix }}</b>
                           </div>
                           <div>
                              {{ labels.description }}:
                              <b>{{ lot.description }}</b>
                           </div>
                        </div>
                     </ng-template>
                  </p-select>
                  <label for="lotId" class="text-lg font-bold text-800 required-field">
                     {{ labels.code }}
                  </label>
               </p-float-label>
            </div>

            <div class="form-group field mt-3 col-6">
               <p-float-label>
                  <div
                     [ngClass]="['p-2 non-editable-field flex align-items-center', formLoad.value.correlativeLotCode? 'p-inputwrapper-filled': '']">
                     {{ formLoad.value.correlativeLotCode }}
                  </div>
                  <label class="text-lg font-bold text-800 required-field"> {{ labels.lot }} </label>
               </p-float-label>
            </div>

            <div class="form-group field mt-3 col-6">
               <p-float-label>
                  <p-select inputId="mineralId" formControlName="mineralId" [options]="minerals" optionLabel="name"
                     optionValue="id" [filter]="true" filterBy="name" styleClass="w-full" appendTo="body"></p-select>
                  <label for="mineralId" class="text-lg font-bold text-800 required-field">
                     {{ labels.mineral }}
                  </label>
               </p-float-label>
            </div>

            <div class="form-group field mt-3 col-6">
               <p-float-label>
                  <p-select inputId="typeMineralId" formControlName="typeMineralId" [options]="typeMinerals"
                     optionLabel="name" optionValue="id" [filter]="true" filterBy="name" styleClass="w-full"
                     appendTo="body"></p-select>
                  <label for="typeMineralId" class="text-lg font-bold text-800 required-field">
                     {{ labels.typeMineral }}
                  </label>
               </p-float-label>
            </div>

            <div class="form-group field mt-3 col-6">
               <p-float-label>
                  <p-inputNumber id="weight" mode="decimal" locale="en-US" [minFractionDigits]="2"
                     [maxFractionDigits]="2" [useGrouping]="false" [min]="0" formControlName="weight"
                     styleClass="w-full" />
                  <label htmlFor="weight" class="text-lg font-bold text-800 required-field">
                     {{ labels.weightKg }}
                  </label>
               </p-float-label>
            </div>

            <div class="form-group field mt-3 col-6">
               <p-float-label>
                  <p-inputNumber id="numberSacks" [useGrouping]="false" [min]="1" formControlName="numberSacks"
                     styleClass="w-full" />
                  <label htmlFor="numberSacks" class="text-lg font-bold text-800">
                     {{ labels.numberSacks }}
                  </label>
               </p-float-label>
            </div>

            <div class="form-group field mt-3 col-6">
               <p-float-label>
                  <p-select inputId="cooperativeId" formControlName="cooperativeId" [options]="cooperatives"
                     optionLabel="name" optionValue="id" [filter]="true" [showClear]="true" filterBy="name"
                     styleClass="w-full" appendTo="body"></p-select>
                  <label for="cooperativeId" class="text-lg font-bold text-800">
                     {{ labels.cooperative }}
                  </label>
               </p-float-label>
            </div>

            <div class="form-group field mt-3 col-6">
               <p-float-label>
                  <p-select inputId="mineId" formControlName="mineId" [options]="mines" optionLabel="name"
                     optionValue="id" [filter]="true" [showClear]="true" filterBy="name" styleClass="w-full"
                     appendTo="body"></p-select>
                  <label for="mineId" class="text-lg font-bold text-800">
                     {{ labels.mine }}
                  </label>
               </p-float-label>
            </div>

            <div class="form-group field mt-3 col-12">
               <p-float-label>
                  <input type="text" pInputText id="observation" formControlName="observation" class="w-full" />
                  <label htmlFor="observation" class="text-lg font-bold text-800">
                     {{ labels.observation }}
                  </label>
               </p-float-label>
            </div>
         </div>
      </ng-template>
      <ng-template pTemplate="footer">
         <div class="p-2 pb-3">
            <button type="button" pButton pRipple [label]="buttons.cancel" icon="pi pi-times" severity="secondary"
               [rounded]="true" size="small" class="mr-2 shadow-3" (click)="hideModal()"></button>
            <button pButton pRipple [label]="buttons.save" icon="pi pi-check" [rounded]="true" size="small"
               class="mr-2 shadow-3 hover-primary" (click)="saveLoad()" [disabled]="formLoad.invalid"></button>
         </div>
      </ng-template>
   </p-dialog>
</form>